<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>SLURM使用教程</title>
    <link href="/2023/02/01/Slurm-%E4%BD%9C%E4%B8%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
    <url>/2023/02/01/Slurm-%E4%BD%9C%E4%B8%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="SLURM使用教程"><a href="#SLURM使用教程" class="headerlink" title="SLURM使用教程"></a>SLURM使用教程</h1><h2 id="常用术语"><a href="#常用术语" class="headerlink" title="常用术语"></a>常用术语</h2><ul><li>user：用户名</li><li>node：计算节点</li><li>core：cpu核</li><li>job：作业</li><li>job step：作业步，单个作业可以有多个作业步</li><li>partition：分区，作业需在特定分区中运行</li><li>QOS：服务质量，可理解为用户可使用的CPU、内存等资源限制</li><li>tasks：任务数，默认一个任务使用一个cpu核，可理解为作业所需的cpu核数</li><li>socket：cpu插槽，可理解为物理cpu颗数</li><li>stdout：标准输出文件，程序运行正常时输出信息的文件，一般指输出到屏幕的信息</li><li>stderr：标准错误文件，程序运行出错时输出信息的文件，一般指输出到屏幕的信息</li></ul><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><ul><li>sbatch：提交作业脚本。此脚本一般会包含一个或多个srun命令启动并行任务</li><li>sinfo：显示分区或节点状态，可以通过参数选项进行过滤、和排序</li><li>squeue：显示队列的作业及作业状态</li><li>scancel：取消排队或运行中的作业</li><li>scontrol：显示或设定slurm作业、分区、节点等状态</li><li>sacctmgr：显示和设置账户关联的QOS等信息</li><li>sacct：显示历史作业信息</li><li>srun：运行并行作业，具有多个选项，如：最大和最小节点数、处理器数、是否指定和排除节点</li></ul><h2 id="节点状态查看"><a href="#节点状态查看" class="headerlink" title="节点状态查看"></a>节点状态查看</h2><p><code>sinfo</code><br><img src="/20230201154541049/20230201035423129.png"></p><ul><li>PARRITION：节点所在分区</li><li>AVAIL：分区状态，up标识可用，down标识不可用</li><li>TIMELIMIT：程序运行最大时长，infinite表示不限制，如果限制格式为days-houres:minutes:seconds</li><li>NODES：节点数</li><li>NODELIST：节点名列表</li><li>STATE：节点状态，可能的状态包括：</li><li>allocated、alloc ：已分配</li><li>completing、comp：完成中</li><li>down：宕机</li><li>drained、drain：已失去活力</li><li>fail：失效</li><li>idle：空闲</li><li>mixed：混合，节点在运行作业，但有些空闲CPU核，可接受新作业</li><li>reserved、resv：资源预留</li><li>unknown、unk：未知原因</li></ul><p>如果状态带有后缀*，表示节点没有响应</p><h2 id="分区信息查看"><a href="#分区信息查看" class="headerlink" title="分区信息查看"></a>分区信息查看</h2><p><img src="/20230201154541049/20230201035533330.png"></p><p>DisableRootJobs:不允许root提交作业</p><p>Maxtime：最大运行时间</p><p>LLN：是否按最小负载节点调度</p><p>Maxnodes：最大节点数</p><p>Hidden：是否为隐藏分区</p><p>Default：是否为默认分区</p><p>OverSubscribe：是否允许超时</p><p>ExclusiveUser：排除的用户</p><h2 id="作业信息查看"><a href="#作业信息查看" class="headerlink" title="作业信息查看"></a>作业信息查看</h2><p><img src="/20230201154541049/20230201035616729.png"></p><ul><li>JOBID：作业号</li><li>PARITION：分区名</li><li>NAME：作业名</li><li>USER：用户名</li><li>ST：状态，常见的状态包括：</li><li>PD、Q：排队中 ，PENDING</li><li>R：运行中 ，RUNNING</li><li>CA：已取消，CANCELLED</li><li>CG：完成中，COMPLETIONG</li><li>F：已失败，FAILED</li><li>TO：超时，TIMEOUT</li><li>NF：节点失效，NODE FAILURE</li><li>CD：已完成，COMPLETED<br><img src="/20230201154541049/20230201035711947.png"></li></ul><p>批处理模式提交作业<br>1.用户编写作业脚本</p><p>2.提交作业</p><p>3.作业排队等待资源分配</p><p>4.在首节点加载执行作业脚本</p><p>5.脚本执行结束，释放资源</p><p>6.用户在输出文件中查看运行结果</p><p><img src="/20230201154541049/20230201035739038.png"></p><ul><li>作业脚本为文本文件，首行一“#!”开头，指定解释程序</li><li>脚本中可通过srun加载计算任务</li><li>一个作业可包含多个作业步</li><li>脚本在管理节点上提交，实际在计算节点上执行</li><li>脚本输出写到输出文件中</li></ul><p>以下是一些常见的作业资源需求参数，使用#SBATCH -xx xxx的方式写入脚本中即可</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css">-J,<span class="hljs-attr">--job-name</span>：指定作业名称<br>-N,<span class="hljs-attr">--nodes</span>：节点数量<br>-n,<span class="hljs-attr">--ntasks</span>：使用的CPU核数<br><span class="hljs-attr">--mem</span>：指定每个节点上使用的物理内存<br>-t,<span class="hljs-attr">--time</span>：运行时间，超出时间限制的作业将被终止<br>-<span class="hljs-selector-tag">p</span>,<span class="hljs-attr">--partition</span>：指定分区<br><span class="hljs-attr">--reservation</span>：资源预留<br>-w,<span class="hljs-attr">--nodelist</span>：指定节点运行作业<br>-x,<span class="hljs-attr">--exclude</span>：分配给作业的节点中不要包含指定节点<br><span class="hljs-attr">--ntasks-per-node</span>：指定每个节点使用几个CPU核心<br><span class="hljs-attr">--begin</span>：指定作业开始时间<br>-D，<span class="hljs-attr">--chdir</span>：指定脚本/命令的工作目录<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>Slurm</category>
      
      <category>作业调度系统</category>
      
    </categories>
    
    
    <tags>
      
      <tag>原创</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/02/01/hello-world/"/>
    <url>/2023/02/01/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
